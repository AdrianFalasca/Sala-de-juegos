import{a as S,b as c,c as N,d as k,e as V,f as D,g as P,h as L,i as q,j as A,k as B,m as G,n as O,o as z,p as H}from"./chunk-6SSDFAV4.js";import{d as I,r as j,s as U}from"./chunk-GAD4JG6Z.js";import{a as R}from"./chunk-IHIM3ULH.js";import"./chunk-X5YLR3NI.js";import{a as x,b as T}from"./chunk-WJHVTQWF.js";import{Z as F,k as M,n as E}from"./chunk-X4WV2SCJ.js";import"./chunk-PT2JM3JA.js";import{$a as m,Ha as C,La as f,S as y,_a as o,ab as s,bb as a,kb as b,lb as w,wa as i,zb as _}from"./chunk-XYGHVF62.js";import{i as h}from"./chunk-ODN5LVDJ.js";function K(t,r){t&1&&(m(0,"h2",16),_(1,"Registro"),s())}function Q(t,r){t&1&&a(0,"p-message",17)}function W(t,r){t&1&&a(0,"p-message",18)}function X(t,r){t&1&&a(0,"p-message",19)}function Y(t,r){t&1&&a(0,"p-message",20)}function Z(t,r){t&1&&a(0,"p-message",21)}function $(t,r){t&1&&a(0,"p-message",22)}function ee(t,r){if(t&1&&a(0,"p-message",23),t&2){let n=w();o("text",n.errorMsg)}}var J=class t{fb=y(L);auth=y(R);router=y(I);passwordsIgualesValidator(){return r=>{let n=r.get("password")?.value??"",e=r.get("confirm")?.value??"";return!n||!e||n===e?null:{passwordMismatch:!0}}}form=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirm:["",[c.required]]},{validators:this.passwordsIgualesValidator()});errorMsg="";cargando=!1;registrar(){return h(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.cargando=!0,this.errorMsg="";let{email:r,password:n}=this.form.value;try{yield this.auth.register(r,n),this.router.navigateByUrl("/")}catch(e){this.errorMsg=e?.message?.includes("already registered")?"El usuario ya est\xE1 registrado.":e?.message||"Error al registrar"}finally{this.cargando=!1}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=C({type:t,selectors:[["app-registro"]],decls:24,vars:13,consts:[[1,"auth-wrap"],["pTemplate","header"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"p-field"],[1,"text-muted"],["pInputText","","formControlName","email","placeholder","tu@mail.com","autocomplete","email"],["severity","error","text","El email es obligatorio",4,"ngIf"],["severity","error","text","Formato de email inv\xE1lido",4,"ngIf"],["formControlName","password","autocomplete","new-password",3,"feedback","toggleMask"],["severity","error","text","La contrase\xF1a es obligatoria",4,"ngIf"],["severity","error","text","M\xEDnimo 6 caracteres",4,"ngIf"],["formControlName","confirm","autocomplete","new-password",3,"feedback","toggleMask"],["severity","error","text","La confirmaci\xF3n es obligatoria",4,"ngIf"],["severity","error","text","Las contrase\xF1as no coinciden",4,"ngIf"],["pButton","","type","submit","label","Crear cuenta",3,"disabled"],["severity","error","styleClass","mt-2",3,"text",4,"ngIf"],[1,"card-title"],["severity","error","text","El email es obligatorio"],["severity","error","text","Formato de email inv\xE1lido"],["severity","error","text","La contrase\xF1a es obligatoria"],["severity","error","text","M\xEDnimo 6 caracteres"],["severity","error","text","La confirmaci\xF3n es obligatoria"],["severity","error","text","Las contrase\xF1as no coinciden"],["severity","error","styleClass","mt-2",3,"text"]],template:function(n,e){if(n&1&&(m(0,"div",0)(1,"p-card"),f(2,K,2,0,"ng-template",1),m(3,"form",2),b("ngSubmit",function(){return e.registrar()}),m(4,"div",3)(5,"label",4),_(6,"Email"),s(),a(7,"input",5),f(8,Q,1,0,"p-message",6)(9,W,1,0,"p-message",7),s(),m(10,"div",3)(11,"label",4),_(12,"Contrase\xF1a"),s(),a(13,"p-password",8),f(14,X,1,0,"p-message",9)(15,Y,1,0,"p-message",10),s(),m(16,"div",3)(17,"label",4),_(18,"Confirmar contrase\xF1a"),s(),a(19,"p-password",11),f(20,Z,1,0,"p-message",12)(21,$,1,0,"p-message",13),s(),a(22,"button",14),f(23,ee,1,1,"p-message",15),s()()()),n&2){let l,p,u,g,d,v;i(3),o("formGroup",e.form),i(5),o("ngIf",((l=e.form.get("email"))==null?null:l.hasError("required"))&&(((l=e.form.get("email"))==null?null:l.dirty)||((l=e.form.get("email"))==null?null:l.touched))),i(),o("ngIf",((p=e.form.get("email"))==null?null:p.hasError("email"))&&(((p=e.form.get("email"))==null?null:p.dirty)||((p=e.form.get("email"))==null?null:p.touched))),i(4),o("feedback",!1)("toggleMask",!0),i(),o("ngIf",((u=e.form.get("password"))==null?null:u.hasError("required"))&&(((u=e.form.get("password"))==null?null:u.dirty)||((u=e.form.get("password"))==null?null:u.touched))),i(),o("ngIf",((g=e.form.get("password"))==null?null:g.hasError("minlength"))&&(((g=e.form.get("password"))==null?null:g.dirty)||((g=e.form.get("password"))==null?null:g.touched))),i(4),o("feedback",!1)("toggleMask",!0),i(),o("ngIf",((d=e.form.get("confirm"))==null?null:d.hasError("required"))&&(((d=e.form.get("confirm"))==null?null:d.dirty)||((d=e.form.get("confirm"))==null?null:d.touched))),i(),o("ngIf",e.form.hasError("passwordMismatch")&&(((v=e.form.get("confirm"))==null?null:v.dirty)||((v=e.form.get("confirm"))==null?null:v.touched))),i(),o("disabled",e.cargando||e.form.invalid),i(),o("ngIf",e.errorMsg)}},dependencies:[E,M,q,V,S,N,k,D,P,B,A,O,G,F,U,j,T,x,H,z],styles:[".auth-wrap[_ngcontent-%COMP%]{max-width:420px;margin:6vh auto 0}.card-title[_ngcontent-%COMP%]{text-align:center;margin:.25rem 0 .5rem;font-weight:700}.p-field[_ngcontent-%COMP%]{margin-bottom:.75rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}"]})};export{J as RegistroComponent};
